{% extends 'base_logged.html' %}

{% block header %}
    {{ super() }}

    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='nouislider/nouislider.css') }}"  media="screen,projection"/>
    <script type="text/javascript" src="{{ url_for('static', filename='nouislider/nouislider.min.js') }}"></script>

    <script>
        getSeatURL = "{{ url_for('xhr.zoneGetSeats',zid=zone_data['id']) }}";
        zoneActionURL = "{{ url_for('xhr.zoneAction') }}";
        uid = {{ session['uid'] }};
        dstId = "targetDiv";

        zone_icons = {
            book: "{{ url_for('static',filename='zone_icons/book.png') }}",
            rebook: "{{ url_for('static',filename='zone_icons/rebook.png') }}",
            conflict: "{{ url_for('static',filename='zone_icons/conflict.png') }}",
            user_conflict: "{{ url_for('static',filename='zone_icons/user_conflict.png') }}",
            user_exact: "{{ url_for('static',filename='zone_icons/user_exact.png') }}",
            user_rebook: "{{ url_for('static',filename='zone_icons/user_rebook.png') }}",
        };
    </script>

    <script src="{{ url_for('static', filename='zone.js') }}"></script>

{% endblock %}

{% block content %}
    {{ super() }}

    <div id="action_modal" class="modal bottom-sheet">
        <div class="modal-content">
            <h4 id="action_modal_title">Seat: A4 TODO</h4>
            <a href="#!" class="modal-close waves-effect waves-light btn zone_action_btn" id="action_book_btn">Book</a>
            <a href="#!" class="modal-close waves-effect waves-light btn zone_action_btn" id="action_update_btn">Update</a>
            <a href="#!" class="modal-close waves-effect waves-light btn zone_action_btn" id="action_delete_btn">Release</a>
        </div>
    </div>

    <div>

        <div class="row">
            <div class="col s2">
                {% for w in nextWeek %}
                <p>
                    <label>
                        <input class="filled-in date_checkbox" type="checkbox" value="{{w['timestamp']}}" {{ 'checked="checked"' if w['mark'] }}/>
                        <span>{{ w['weekday'] }}, {{ w['date'] }}</span>
                    </label>
                </p>        
                {% endfor %}
            </div>

            <div class="col">
                <div id="timeslider-min" class="timeslider-hint">12:00</div>
                <div id="timeslider" class="timeslider"></div>
                <div id="timeslider-max" class="timeslider-hint">12:00</div>
            </div>

            <div class="zonemap col s9" id="targetDiv">
                <img src="{{ url_for('static', filename=zone_data['image']) }}">                        
            </div>
        </div>
    </div>

{% endblock %}


